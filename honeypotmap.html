<html>
<head>
    <meta http-equiv="refresh" content="60">
    <script src='./payload.js' type='text/javascript'>
    </script>
    <script src='https://www.gstatic.com/charts/loader.js' type='text/javascript'></script>
    <script type='text/javascript'>
	var total = 0;
	for (let a = 1; a < payload.length; a++) {
		document.write("|" + payload[a][0] + ": " + payload[a][1] + "|\n");
		total += payload[a][1];
	}
	document.write("\nTotal attacks: " + total);
        google.charts.load('current', {
        'packages': ['geochart'], 'mapsApiKey': 'AIzaSyDDmxrKDwSsc4mAjJAO1BLo02hxo36SH-4'
     });
      google.charts.setOnLoadCallback(drawMarkersMap);

     function drawMarkersMap() {
     var data = google.visualization.arrayToDataTable(payload);

     var options = {
        sizeAxis: { minValue: 0, maxValue: 100 },
        region: 'world',
        displayMode: 'markers',
        colorAxis: {colors: ['#00a806', '#e60000']} // green to red
     };

     var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
     chart.draw(data, options);
    };
    </script>

</head>
<body>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
</body>
</html>